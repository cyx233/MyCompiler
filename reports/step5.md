# 实验报告
#### 计81 陈雨翔 2018011295
## 任务概述
1. 改进语法
2. 实现了初步的名称解析器
3. IR标识符增加FrameAddr，Load，Store，Pop
4. Asm实现FrameAddr，Load，Store，Pop支持。实验指导全部给出了参考
## 遇到的困难
阅读名称解析器Namer又花了不少时间

Variable是表现栈帧中变量的对象。包括变量名，id（重名变量），与fp的offset，以及字节长度信息。现在只需要支持4字节的变量。现在没有多个作用域，也不需要id来记录重名变量。

Visitor设计模式，解析了cst。GlobInfo是全局名称，FuncNameInfo是函数内部定义域名称。NameInfo是FuncNameInfo的总和。

主要功能是，传入Ident对象，即某个确定位置的变量，需要对应的找到栈帧中保存的位置，即找到对应的Variable对象。

现在不需要GlobInfo与FuncNameInfo，只实现了初步的NameInfo，记录main函数内，且只有一个作用域的变量。
## 思考题
### 第一题
1. 计算表达式用的运算栈，它可能为空（当前不在计算某表达式的过程中）
2. 当前可用的所有局部变量，可能为空（当前没有局部变量）
3. 返回地址、老的栈帧基址等信息，返回地址4字节，老的栈帧基址4字节。

### 第二题
由于使用了名称解析的步骤，所以只需要在visitDeclaration函数中，去掉
关于redefination的检查即可。此时声明语句可以作为赋值语句使用。

## 代码复用
使用了参考实现中关于名称解析器的部分框架

